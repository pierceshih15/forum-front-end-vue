{"version":3,"sources":["webpack:///./src/apis/admin.js","webpack:///./src/views/AdminRestaurant.vue?26e2","webpack:///src/views/AdminRestaurant.vue","webpack:///./src/views/AdminRestaurant.vue?7978","webpack:///./src/views/AdminRestaurant.vue"],"names":["__webpack_exports__","categories","get","apiHelper","create","_ref","name","post","update","_ref2","categoryId","put","concat","delete","_ref3","restaurants","getDetail","_ref4","restaurantId","_ref5","formData","_ref6","_ref7","users","_ref8","userId","isAdmin","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","restaurant","categoryName","staticStyle","width","margin-bottom","attrs","src","_f","image","openingHours","tel","address","description","href","on","click","$event","$router","back","staticRenderFns","AdminRestaurantvue_type_script_lang_js_","mixins","components","Spinner","data","id","isLoading","mounted","$route","params","fetchRestaurant","beforeRouteUpdate","to","from","next","methods","_fetchRestaurant","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","statusText","wrap","_context","prev","admin","sent","Error","_objectSpread","Category","opening_hours","t0","helpers","fire","type","title","push","stop","_x","apply","arguments","views_AdminRestaurantvue_type_script_lang_js_","component","componentNormalizer"],"mappings":"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","file":"js/chunk-330bf35e.b1618e38.js","sourcesContent":["import {\n  apiHelper\n} from './../utils/helpers';\n\nexport default {\n  categories: {\n    get() {\n      return apiHelper.get('/admin/categories')\n    },\n    create({\n      name\n    }) {\n      return apiHelper.post('/admin/categories', {\n        name\n      })\n    },\n    update({\n      categoryId,\n      name\n    }) {\n      return apiHelper.put(`/admin/categories/${categoryId}`, {\n        name\n      })\n    },\n    delete({\n      categoryId\n    }) {\n      return apiHelper.delete(`/admin/categories/${categoryId}`)\n    },\n  },\n  restaurants: {\n    getDetail({\n      restaurantId\n    }) {\n      return apiHelper.get(`/admin/restaurants/${restaurantId}`)\n    },\n    get() {\n      return apiHelper.get('/admin/restaurants')\n    },\n    create({\n      formData\n    }) {\n      return apiHelper.post('/admin/restaurants', formData)\n    },\n    update({\n      restaurantId,\n      formData\n    }) {\n      return apiHelper.put(`/admin/restaurants/${restaurantId}`, formData)\n    },\n    delete({\n      restaurantId\n    }) {\n      return apiHelper.delete(`/admin/restaurants/${restaurantId}`)\n    },\n  },\n  users: {\n    get() {\n      return apiHelper.get('/admin/users')\n    },\n    update({\n      userId,\n      isAdmin\n    }) {\n      return apiHelper.put(`/admin/users/${userId}`, {\n        isAdmin\n      })\n    }\n  }\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container py-5\"},[(_vm.isLoading)?_c('Spinner'):_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('h1',[_vm._v(_vm._s(_vm.restaurant.name))]),_c('p',[_vm._v(\"[\"+_vm._s(_vm.restaurant.categoryName)+\"]\")])]),_c('div',{staticClass:\"col-md-4\"},[_c('img',{staticClass:\"img-responsive center-block\",staticStyle:{\"width\":\"250px\",\"margin-bottom\":\"25px\"},attrs:{\"src\":_vm._f(\"emptyImage\")(_vm.restaurant.image)}}),_c('div',{staticClass:\"well\"},[_c('ul',{staticClass:\"list-unstyled\"},[_c('li',[_c('strong',[_vm._v(\"Opening Hour:\")]),_vm._v(\"\\n            \"+_vm._s(_vm.restaurant.openingHours)+\"\\n          \")]),_c('li',[_c('strong',[_vm._v(\"Tel:\")]),_vm._v(\"\\n            \"+_vm._s(_vm.restaurant.tel)+\"\\n          \")]),_c('li',[_c('strong',[_vm._v(\"Address:\")]),_vm._v(\"\\n            \"+_vm._s(_vm.restaurant.address)+\"\\n          \")])])])]),_c('div',{staticClass:\"col-md-8\"},[_c('p',[_vm._v(_vm._s(_vm.restaurant.description))])])]),_c('hr'),_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.$router.back()}}},[_vm._v(\"回上一頁\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container py-5\">\n    <Spinner v-if=\"isLoading\" />\n    <div v-else class=\"row\">\n      <div class=\"col-md-12\">\n        <h1>{{ restaurant.name }}</h1>\n        <p>[{{ restaurant.categoryName }}]</p>\n      </div>\n      <div class=\"col-md-4\">\n        <img\n          class=\"img-responsive center-block\"\n          :src=\"restaurant.image | emptyImage\"\n          style=\"width: 250px;margin-bottom: 25px;\"\n        />\n        <div class=\"well\">\n          <ul class=\"list-unstyled\">\n            <li>\n              <strong>Opening Hour:</strong>\n              {{ restaurant.openingHours }}\n            </li>\n            <li>\n              <strong>Tel:</strong>\n              {{ restaurant.tel }}\n            </li>\n            <li>\n              <strong>Address:</strong>\n              {{ restaurant.address }}\n            </li>\n          </ul>\n        </div>\n      </div>\n      <div class=\"col-md-8\">\n        <p>{{ restaurant.description }}</p>\n      </div>\n    </div>\n    <hr />\n    <a href=\"#\" @click=\"$router.back()\">回上一頁</a>\n  </div>\n</template>\n\n<script>\nimport Spinner from './../components/Spinner'\nimport { emptyImageFilter } from './../utils/mixins'\nimport adminAPI from './../apis/admin'\nimport { Toast } from './../utils/helpers'\n\nexport default {\n  name: 'AdminRestaurant',\n  mixins: [emptyImageFilter],\n  components: {\n    Spinner\n  },\n  data() {\n    return {\n      restaurant: {\n        id: -1,\n        name: '',\n        categoryName: '',\n        image: '',\n        openingHours: '',\n        tel: '',\n        address: '',\n        description: ''\n      },\n      isLoading: false\n    }\n  },\n  mounted() {\n    const { id: restaurantId } = this.$route.params\n    this.fetchRestaurant(restaurantId)\n  },\n  beforeRouteUpdate(to, from, next) {\n    const { id } = to.params\n    this.fetchRestaurant(id)\n    next()\n  },\n  methods: {\n    async fetchRestaurant(restaurantId) {\n      this.isLoading = true\n      try {\n        const {\n          data: { restaurant },\n          statusText\n        } = await adminAPI.restaurants.getDetail({\n          restaurantId\n        })\n\n        if (statusText !== 'OK') {\n          throw new Error(statusText)\n        }\n\n        this.restaurant = {\n          ...this.restaurant,\n          id: restaurant.id,\n          name: restaurant.name,\n          categoryName: restaurant.Category.name,\n          image: restaurant.image,\n          openingHours: restaurant.opening_hours,\n          tel: restaurant.tel,\n          address: restaurant.address,\n          description: restaurant.description\n        }\n        this.isLoading = false\n      } catch (error) {\n        this.isLoading = false\n        if (!this.id) {\n          Toast.fire({\n            type: 'warning',\n            title: '該餐廳不存在，請選擇其他資料'\n          })\n          this.$router.push({\n            name: 'admin-restaurants'\n          })\n        } else {\n          Toast.fire({\n            type: 'error',\n            title: '無法取得餐廳資料，請稍後再試'\n          })\n        }\n      }\n    }\n  }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminRestaurant.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminRestaurant.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminRestaurant.vue?vue&type=template&id=572e730c&\"\nimport script from \"./AdminRestaurant.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminRestaurant.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}