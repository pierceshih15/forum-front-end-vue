{"version":3,"sources":["webpack:///./src/views/UsersTop.vue?8137","webpack:///src/views/UsersTop.vue","webpack:///./src/views/UsersTop.vue?41fd","webpack:///./src/views/UsersTop.vue","webpack:///./node_modules/core-js/modules/_strict-method.js","webpack:///./node_modules/core-js/modules/es6.array.sort.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_l","user","key","id","attrs","to","name","params","src","_f","image","width","height","_s","FollowerCount","type","on","click","$event","stopPropagation","preventDefault","deleteFollowing","addFollowing","staticRenderFns","UsersTopvue_type_script_lang_js_","components","NavTabs","Spinner","mixins","data","users","isLoading","created","fetchUsersTop","methods","_fetchUsersTop","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","_ref","statusText","wrap","_context","prev","next","getTopUsers","sent","Error","t0","helpers","fire","title","stop","apply","arguments","_addFollowing","_callee2","userId","_ref2","_context2","status","map","_objectSpread","isFollowed","sort","a","b","_x","_deleteFollowing","_callee3","_ref3","_context3","_x2","views_UsersTopvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","fails","__webpack_require__","module","exports","method","arg","call","$export","aFunction","toObject","$sort","test","P","F","undefined","comparefn"],"mappings":"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","file":"js/chunk-27b35944.124c025d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container py-5\"},[_c('NavTabs'),(_vm.isLoading)?_c('Spinner'):[_c('h1',{staticClass:\"mt-5\"},[_vm._v(\"美食達人\")]),_c('hr'),_c('div',{staticClass:\"row text-center\"},_vm._l((_vm.users),function(user){return _c('div',{key:user.id,staticClass:\"col-3\"},[_c('router-link',{attrs:{\"to\":{name:'user',params:{id:user.id}}}},[_c('img',{attrs:{\"src\":_vm._f(\"emptyImage\")(user.image),\"width\":\"140px\",\"height\":\"140px\"}})]),_c('h2',[_vm._v(_vm._s(user.name))]),_c('span',{staticClass:\"badge badge-secondary\"},[_vm._v(\"追蹤人數：\"+_vm._s(user.FollowerCount))]),_c('p',{staticClass:\"mt-3\"},[(user.isFollowed)?_c('button',{staticClass:\"btn btn-danger\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.deleteFollowing(user.id)}}},[_vm._v(\"取消追蹤\")]):_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addFollowing(user.id)}}},[_vm._v(\"追蹤\")])])],1)}),0)]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container py-5\">\n    <NavTabs />\n\n    <Spinner v-if=\"isLoading\" />\n    <template v-else>\n      <h1 class=\"mt-5\">美食達人</h1>\n      <hr />\n      <div class=\"row text-center\">\n        <div v-for=\"user in users\" :key=\"user.id\" class=\"col-3\">\n          <router-link :to=\"{name:'user',params:{id:user.id}}\">\n            <img :src=\"user.image | emptyImage\" width=\"140px\" height=\"140px\" />\n          </router-link>\n          <h2>{{user.name}}</h2>\n          <span class=\"badge badge-secondary\">追蹤人數：{{user.FollowerCount}}</span>\n          <p class=\"mt-3\">\n            <button\n              v-if=\"user.isFollowed\"\n              type=\"button\"\n              class=\"btn btn-danger\"\n              @click.stop.prevent=\"deleteFollowing(user.id)\"\n            >取消追蹤</button>\n            <button\n              v-else\n              type=\"button\"\n              class=\"btn btn-primary\"\n              @click.stop.prevent=\"addFollowing(user.id)\"\n            >追蹤</button>\n          </p>\n        </div>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\nimport Spinner from './../components/Spinner'\nimport NavTabs from './../components/NavTabs'\nimport usersAPI from './../apis/users'\nimport { Toast } from './../utils/helpers'\nimport { emptyImageFilter } from './../utils/mixins'\n\nexport default {\n  components: {\n    NavTabs,\n    Spinner\n  },\n  mixins: [emptyImageFilter],\n  data() {\n    return {\n      users: [],\n      isLoading: true\n    }\n  },\n  created() {\n    this.fetchUsersTop()\n  },\n  methods: {\n    async fetchUsersTop() {\n      try {\n        this.isLoading = true\n        const { data, statusText } = await usersAPI.getTopUsers()\n\n        if (statusText !== 'OK') {\n          throw new Error(statusText)\n        }\n        this.users = data.users\n        this.isLoading = false\n      } catch (error) {\n        this.isLoading = false\n        Toast.fire({\n          type: 'error',\n          title: '無法取得美食達人，請稍後再試'\n        })\n      }\n    },\n    async addFollowing(userId) {\n      try {\n        const { data, statusText } = await usersAPI.addFollowing({\n          userId\n        })\n\n        if (statusText !== 'OK' || data.status !== 'success') {\n          throw new Error(statusText)\n        }\n\n        this.users = this.users\n          .map(user => {\n            if (user.id !== userId) {\n              return user\n            }\n\n            return {\n              ...user,\n              FollowerCount: user.FollowerCount + 1,\n              isFollowed: true\n            }\n          })\n          .sort((a, b) => b.FollowerCount - a.FollowerCount)\n      } catch (error) {\n        Toast.fire({\n          type: 'error',\n          title: '無法加入追蹤，請稍後再試'\n        })\n      }\n    },\n    async deleteFollowing(userId) {\n      try {\n        const { data, statusText } = await usersAPI.deleteFollowing({\n          userId\n        })\n\n        if (statusText !== 'OK' || data.status !== 'success') {\n          throw new Error(statusText)\n        }\n\n        this.users = this.users\n          .map(user => {\n            if (user.id !== userId) {\n              return user\n            }\n\n            return {\n              ...user,\n              FollowerCount: user.FollowerCount - 1,\n              isFollowed: false\n            }\n          })\n          .sort((a, b) => b.FollowerCount - a.FollowerCount)\n      } catch (error) {\n        Toast.fire({\n          type: 'error',\n          title: '無法取消追蹤，請稍後再試'\n        })\n      }\n    }\n  }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UsersTop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UsersTop.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UsersTop.vue?vue&type=template&id=7520163c&\"\nimport script from \"./UsersTop.vue?vue&type=script&lang=js&\"\nexport * from \"./UsersTop.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n","'use strict';\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar fails = require('./_fails');\nvar $sort = [].sort;\nvar test = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function () {\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function () {\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !require('./_strict-method')($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n"],"sourceRoot":""}